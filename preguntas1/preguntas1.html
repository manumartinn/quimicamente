<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Químicamente | Preguntas 1</title>
    <link rel="stylesheet" type="text/css" href="preguntas1.css">
</head>
        <body>
            <aside class="responsive-banner" id="banner2">
                <aside class="responsive-banner">
                    <img src="imagenes/cortisol.jpg" id="imagen1"/>
                    <form id="preguntaForm">
                    <p>¿Cuál es el efecto secundario del cortisol?</p>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="respuesta1" value="incorrecta"/>
                        <label for="efecto">Taquicardia</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="respuesta1" value="incorrecta"/>
                        <label for="efecto">Caida de cabello</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="respuesta1" value="correcta"/>
                        <label for="efecto">Retención de grasa</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="respuesta1" value="incorrecta"/>
                        <label for="efecto">Adicciones</label><br>
                    </div>
                </aside>
            </aside>

            <aside class="responsive-banner">
                <img src="imagenes/endorfina.jpg" id="imagen1"/>
                <p>¿Cuáles son los receptores de la endorfina?</p>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="respuesta2" value="incorrecta">
                        <label for="endorfina">Receptores OPRM</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="respuesta2" value="incorrecta">
                        <label for="cortisol">Receptores OPRD</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="respuesta2" value="incorrecta">
                        <label for="adrenalina">Receptores OPRK</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="respuesta2" value="correcta">
                        <label for="serotonina">Todas son correctas</label><br>
                    </div>
                </aside>
            </aside>

            <aside class="responsive-banner">
                <img src="imagenes/serotonina.jpg" id="imagen1"/>
                <p>¿Cual es el centro de producción de la serotonina?</p>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="cdp" value="correcta">
                        <label for="cdp">Núcleo del rafe en el tronco encefálico</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="cdp" value="incorrecta">
                        <label for="cdp">Plexo mienterico</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="cdp" value="incorrecta">
                        <label for="cdp">Corteza frontal del cerebro</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="cdp" value="incorrecta">
                        <label for="cdp">Sistema nervioso central</label><br>
                    </div>
                </aside>
            </aside>

            <aside class="responsive-banner">
                <img src="imagenes/dopamina.jpg" id="imagen1"/>
                <p>¿Cuál de estas afirmaciones sobre la dopamina es correcta?</p>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="dato" value="incorrecta">
                        <label for="dato">Las mujeres no producen dopamina</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="dato" value="correcta">
                        <label for="dato">La dopamina determina rasgos de nuestra personalidad</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="dato" value="incorrecta">
                        <label for="wall-b">Nos hace sentir tristes</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="dato" value="incorrecta">
                        <label for="wall-e">Es una parte del cerebro</label><br>
                    </div>
                </aside>
            </aside>

            <aside class="responsive-banner">
                <img src="imagenes/adrenalina.jpg" id="imagen1"/>
                <p>¿Cuál es la función de la adrenalina?</p>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="funcion" value="incorrecta">
                        <label for="funcion">Regula nuestro organismo</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="funcion" value="incorrecta">
                        <label for="funcion">Regula el estrés para proteger el sistema inmunológico</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="funcion" value="incorrecta">
                        <label for="funcion">Actua estimulando la sensación de placer y bienestar</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" name="funcion" value="correcta">
                        <label for="funcion">Prepara al cuerpo para reaccionar y estar alerta</label><br>
                    </div>
                </aside>
            </aside>
           
            <input id="enviar" type="submit" value="Enviar">
            </form>
        </aside>


        <script>
            const urlParams = new URLSearchParams(window.location.search);
            const nombre = urlParams.get('nombre');
            const dni = urlParams.get('dni');

            const tiempoInicio = Date.now();

            document.getElementById('preguntaForm').addEventListener('submit', function(event) {
                event.preventDefault();
                const respuestasSeleccionadas = document.querySelectorAll('input[type="radio"]:checked');
                let puntaje = 0;

                // Itera sobre las respuestas seleccionadas y suma puntos si son correctas
                respuestasSeleccionadas.forEach(respuesta => {
                    console.log(`Respuesta seleccionada: ${respuesta.value}`);
                    if (respuesta.value == 'correcta') {
                        puntaje += 10; // Añadir 10 puntos por cada respuesta correcta
                    }
                });

                const tiempoFin = Date.now();
                const tiempoTranscurrido = ((tiempoFin - tiempoInicio) / 1000).toFixed(2); // Tiempo en segundos con dos decimales

                // Guarda el puntaje y tiempo en el almacenamiento local
                localStorage.setItem('puntaje', puntaje);
                localStorage.setItem('tiempo', tiempoTranscurrido);

                // Enviar los datos al backend
                fetch('../guardar_resultado.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `nombre=${encodeURIComponent(nombre)}&dni=${encodeURIComponent(dni)}&puntaje=${encodeURIComponent(puntaje)}&tiempo=${encodeURIComponent(tiempoTranscurrido)}`
                })
                .then(response => {
                    if (response.ok) {
                        // Redirigir a la página de agradecimiento
                        window.location.href = '../gracias.html';
                    } else {
                        alert('Error al guardar los resultados.');
                    }
                })
                .catch(error => {
                    console.error('Error en la solicitud fetch:', error);
                    alert('Error de red al intentar guardar los resultados.');
                });
            });
        </script>
        </body>
    </html>