<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Químicamente | Preguntas 5</title>
    <link rel="stylesheet" type="text/css" href="preguntas5.css">
</head>
        <body>
            <aside class="responsive-respuesta" id="fondo">
                <aside class="responsive-respuesta">
                <img src="img/endorfina.jpg" id="imagen1"/>
                    <form id="preguntaForm">
                    <p>¿Qué efectos secundarios tiene el exceso de endorfina en nuestro cuerpo?</p>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Tener un alto nivel de endorfinas es muy negativo porque no inhiben el dolor" name="endorfina" value="incorrecta" />
                        <label for="Tener un alto nivel de endorfinas es muy negativo porque no inhiben el dolor">Tener un alto nivel de endorfinas es muy negativo porque no inhiben el dolor</label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Tener un alto nivel de endorfinas es muy negativo porque producen mucha ansiedad" name="endorfina" value="incorrecta"/>
                        <label for="Tener un alto nivel de endorfinas es muy negativo porque producen mucha ansiedad ">Tener un alto nivel de endorfinas es muy negativo porque producen mucha ansiedad </label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Tener un alto nivel de endorfinas es muy positivo" name="endorfina" value="correcta"/>
                        <label for="Tener un alto nivel de endorfinas es muy positivo">Tener un alto nivel de endorfinas es muy positivo</label><br> 
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Tener un alto nivel de endorfinas no afecta al funcionamiento de nuestro cuerpo" name="endorfina" value="incorrecta"/>
                        <label for="Tener un alto nivel de endorfinas no afecta al funcionamiento de nuestro cuerpo">Tener un alto nivel de endorfinas no afecta al funcionamiento de nuestro cuerpo</label><br>  
                    </div>
                </aside>
            </aside>

            <aside class="responsive-respuesta">
                <img src="img/serotonina.jpg" id="imagen1"/>
                <p>¿Cuáles son los receptores de la serotonina?</p>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="receptores adrenergicos" name="serotonina" value="incorrecta">
                        <label for="Receptores adrenergicos">Receptores adrenergicos </label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Receptores 5-HT" name="serotonina" value="correcta">
                        <label for="Receptores 5-HT">Receptores 5-HT</label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Proteina de 29 aminoacidos" name="serotonina" value="incorrecta">
                        <label for="Proteina de 29 aminoacidos">Proteina de 29 aminoacidos</label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="d1,d2,d3,d4 y d5" name="serotonina" value="incorrecta">
                        <label for="d1,d2,d3,d4 y d5">D1, D2, D3, D4 Y D5</label><br>
                    </div>
                </aside>
            </aside>

            <aside class="responsive-respuesta">
                <img src="img/dopamina.jpg" id="imagen1"/>
                <p>¿Como es producida la dopamina?</p>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Se produce a partir de los aminoacidos" name="dopamina" value="incorrecta"/>
                        <label for="Se produce a partir de los aminoacidos">Se produce a partir de los aminoácidos</label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Se produce principalmente en las neuronas dopaminergicas" name="dopamina" value="incorrecta">
                        <label for="Se produce principalmente en las neuronas dopaminergicas">Se produce principalmente en las neuronas dopaminergicas</label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Es producida de forma natural por el organismo" name="dopamina" value="incorrecta">
                        <label for="Es producida de forma natural por el organismo">Es producida de forma natural por el organismo</label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Opciones 2 y 3 son correctas" name="dopamina" value="correcta">
                        <label for="Opciones 2 y 3 son correctas">Opciones 2 y 3 son correctas</label><br>
                    </div>
                </aside>
            </aside>

            <aside class="responsive-respuesta">
                <img src="img/adrenalina.jpg" id="imagen1"/>
                <p>¿Cuál de estos es un dato curioso de la adrenalina?</p>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Reaccion de luchar, huir y paralizarse" name="adrenalina" value="correcta">
                        <label for="Reaccion de luchar, huir y paralizarse">Reacción de luchar, huir y paralizarse</label><br> 
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Es importante para el crecimiento" name="adrenalina" value="incorrecta">
                        <label for="Es importante para el crecimiento">Es importante para el crecimiento</label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Se produce mas adrenalina en los hombre" name="adrenalina" value="incorrecta">
                        <label for="Se produce mas adrenalina en los hombre">Se produce más adrenalina en los hombre</label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Nos pone de mejor humor" name="adrenalina" value="incorrecta">
                        <label for="Nos pone de mejor humor">Nos pone de mejor humor</label><br>
                    </div>
                </aside>
            </aside>

            <aside class="responsive-respuesta">
                <img src="img/cortisol.jpg" id="imagen1"/>
                <p>¿Cuál es la función del cortisol?</p>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Regular el estres" name="cortisol" value="correcta">
                        <label for="Regular el estres">Regular el estrés</label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="oreos-nutella" name="cortisol" value="incorrecta">
                        <label for="Producir placer">Producir placer</label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Activar el estado de alerta" name="cortisol" value="incorrecta">
                        <label for="Activar el estado de alerta">Activar el estado de alerta</label><br>
                    </div>
                </aside>
                <aside class="responsive-respuesta" id="respuestas">
                    <div class="radio-container">
                        <input type="radio" id="Regular el apetito" name="cortisol" value="incorrecta">
                        <label for="Regular el apetito">Regular el apetito</label><br>
                    </div>
                </aside>
            </aside>
            <input id="enviar" type="submit" value="Enviar">
            </form>
        </aside>

        <script>
            const urlParams = new URLSearchParams(window.location.search);
            const nombre = urlParams.get('nombre');
            const dni = urlParams.get('dni');

            const tiempoInicio = Date.now();

            document.getElementById('preguntaForm').addEventListener('submit', function(event) {
                event.preventDefault();
                const respuestasSeleccionadas = document.querySelectorAll('input[type="radio"]:checked');
                let puntaje = 0;

                // Itera sobre las respuestas seleccionadas y suma puntos si son correctas
                respuestasSeleccionadas.forEach(respuesta => {
                    console.log(`Respuesta seleccionada: ${respuesta.value}`);
                    if (respuesta.value == 'correcta') {
                        puntaje += 10; // Añadir 10 puntos por cada respuesta correcta
                    }
                });

                const tiempoFin = Date.now();
                const tiempoTranscurrido = ((tiempoFin - tiempoInicio) / 1000).toFixed(2); // Tiempo en segundos con dos decimales

                // Guarda el puntaje y tiempo en el almacenamiento local
                localStorage.setItem('puntaje', puntaje);
                localStorage.setItem('tiempo', tiempoTranscurrido);

                // Enviar los datos al backend
                fetch('../guardar_resultado.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `nombre=${encodeURIComponent(nombre)}&dni=${encodeURIComponent(dni)}&puntaje=${encodeURIComponent(puntaje)}&tiempo=${encodeURIComponent(tiempoTranscurrido)}`
                })
                .then(response => {
                    if (response.ok) {
                        // Redirigir a la página de agradecimiento
                        window.location.href = '../gracias.html';
                    } else {
                        alert('Error al guardar los resultados.');
                    }
                })
                .catch(error => {
                    console.error('Error en la solicitud fetch:', error);
                    alert('Error de red al intentar guardar los resultados.');
                });
            });
        </script>

        </body>
    </html>