<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="preguntas2.css">
    <title>Químicamente | Preguntas 2</title>
</head>
        <body>
            <aside class="responsive-banner" id="banner2">
                <aside class="responsive-banner">
                    <img src="img/sero.jpg" id="imagen1"/>
                    <form id="preguntaForm">
                    <p>¿Cuáles son los efectos secundarios del exceso de serotonina (síndrome de serotonina)?</p>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio"  name="pregunta1" value="incorrecta"/>
                        <label for="Moe">Debilita el sistema inmunológico</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio"  name="pregunta1" value="incorrecta"/>
                        <label for="Moe">Aumenta la presión arterial</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio"  name="pregunta1" value="incorrecta"/>
                        <label for="Moe">Puede generar parkinson</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio"  name="pregunta1" value="correcta"/>
                        <label for="Moe">Puede causar la muerte</label><br>
                    </div>
                </aside>
            </aside>

            <aside class="responsive-banner">
                <img src="img/trans.jpg" id="imagen1"/>
                <p>¿Cuáles son los receptores de la dopamina?</p>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="clarinete" name="pregunta2" value="incorrecta">
                        <label for="clarinete">M1, M2, M3, M4 y M5</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="saxo" name="pregunta2" value="correcta">
                        <label for="saxo">D1, D2, D3, D4 y D5 </label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="violin" name="pregunta2" value="incorrecta">
                        <label for="violin">N1, N2, N3, N4 y N5</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="piano" name="pregunta2" value="incorrecta">
                        <label for="piano">Ninguna opción es correcta</label><br>
                    </div>
                </aside>
            </aside>

            <aside class="responsive-banner">
                <img src="img/adrenalina.jpg" id="imagen1"/>
                <p> ¿Cúal es el centro de producción de la adrenalina?</p>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="anastasia-drizella" name="pregunta3" value="incorrecta">
                        <label for="anastasia-drizella">El cerebro</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="gertrudis-carolina" name="pregunta3" value="correcta">
                        <label for="gertrudis-carolina">La médula de la glándula suprarrenal</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="ana-clara-griselda" name="pregunta3" value="incorrecta">
                        <label for="ana-clara-griselda">Las glándulas suprarrenales</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="moria-susana" name="pregunta3" value="incorrecta">
                        <label for="moria-susana">El corazón</label><br>
                    </div>
                </aside>
            </aside>

            <aside class="responsive-banner">
                <img src="img/corto.jpg" id="imagen1"/>
                <p>¿Cuál de estas afirmaciones del cortisol es verdadera?</p> 
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="wall-y" name="pregunta4" value="incorrecta">
                        <label for="wall-y"> Produce placer </label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="wall-ie" name="pregunta4" value="incorrecta">
                        <label for="wall-ie"> Activa el estado de alerta </label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="wall-b" name="pregunta4" value="correcta">
                        <label for="wall-b">Regula el estrés</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="wall-e" name="pregunta4" value="incorrecta">
                        <label for="wall-e">Regula el apetito</label><br>
                    </div>
                </aside>
            </aside>

            <aside class="responsive-banner">
                <img src="img/feli.jpg" id="imagen1"/>
                <p>¿Cuáles son los receptores de la endorfina?</p>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="sneakers-nutella" name="pregunta5" value="incorrecta">
                        <label for="sneakers-nutella">Receptor µ (OPRM): [3-4 hidrógenos, 7 transmembranas]</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="oreos-nutella" name="pregunta5" value="incorrecta">
                        <label for="oreos-nutella">Receptor δ (OPRD): [3-4 hidrógenos, 7 transmembranas]</label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="pan-mermelada-mantequilla-mani" name="pregunta5" value="incorrecta">
                        <label for="pan-mermelada-mantequilla-mani"> Receptor κ (OPRK): [3-4 hidrógenos, 7 transmembranas]  </label><br>
                    </div>
                </aside>
                <aside class="responsive-banner" id="banner3">
                    <div class="radio-container">
                        <input type="radio" id="oreos-mantequilla-mani" name="pregunta5" value="correcta">
                        <label for="oreos-mantequilla-mani">Todas son correctas</label><br>
                    </div>
                </aside>
            </aside>
            <input id="enviar" type="submit" value="Enviar">
            </form>

            <script>
                const urlParams = new URLSearchParams(window.location.search);
                const nombre = urlParams.get('nombre');
                const dni = urlParams.get('dni');
    
                const tiempoInicio = Date.now();
    
                document.getElementById('preguntaForm').addEventListener('submit', function(event) {
                    event.preventDefault();
                    const respuestasSeleccionadas = document.querySelectorAll('input[type="radio"]:checked');
                    let puntaje = 0;
    
                    // Itera sobre las respuestas seleccionadas y suma puntos si son correctas
                    respuestasSeleccionadas.forEach(respuesta => {
                        console.log(`Respuesta seleccionada: ${respuesta.value}`);
                        if (respuesta.value == 'correcta') {
                            puntaje += 10; // Añadir 10 puntos por cada respuesta correcta
                        }
                    });
    
                    const tiempoFin = Date.now();
                    const tiempoTranscurrido = ((tiempoFin - tiempoInicio) / 1000).toFixed(2); // Tiempo en segundos con dos decimales
    
                    // Guarda el puntaje y tiempo en el almacenamiento local
                    localStorage.setItem('puntaje', puntaje);
                    localStorage.setItem('tiempo', tiempoTranscurrido);
    
                    // Enviar los datos al backend
                    fetch('../guardar_resultado.php', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: `nombre=${encodeURIComponent(nombre)}&dni=${encodeURIComponent(dni)}&puntaje=${encodeURIComponent(puntaje)}&tiempo=${encodeURIComponent(tiempoTranscurrido)}`
                    })
                    .then(response => {
                        if (response.ok) {
                            // Redirigir a la página de agradecimiento
                            window.location.href = '../gracias.html';
                        } else {
                            alert('Error al guardar los resultados.');
                        }
                    })
                    .catch(error => {
                        console.error('Error en la solicitud fetch:', error);
                        alert('Error de red al intentar guardar los resultados.');
                    });
                });
            </script>
        </body>
    </html>